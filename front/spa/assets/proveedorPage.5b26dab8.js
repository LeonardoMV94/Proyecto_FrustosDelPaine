import{ak as _,J as D,al as B,r as V,L as C,M as K,N as r,W as p,am as N,an as T,O as l,ao as W,ap as m,aq as $,V as E,ar as q,as as R,b7 as F,a as M,E as z,X as J,au as L,R as w,S as k,av as U,Q as O,aw as P}from"./index.3d5788d8.js";import{Q as X,a as y}from"./QForm.78ec8121.js";import{Q as j,a as f}from"./QTr.ac3c5c62.js";import{a as G}from"./QTable.f7cbd520.js";import"./QItem.67c78710.js";const H=async()=>(await _.get("/proveedores")).data,Y=R("div",{class:"text-center text-h5 q-pb-md"},"Crear un nuevo Proveedor",-1),Z=D({__name:"crearProveedor",props:{dialogVisible:{type:Boolean}},emits:["update:dialogVisible"],setup(c,{emit:v}){const S=c,{dialogVisible:g}=B(S),A=v,b=V(),n=V(),d=V(),i=V(),u=V(),o=V(),e=V(1),t=()=>{const x={rut:b.value,giro:n.value,nombre:d.value,telefono:i.value,correo:u.value,pagina_web:o.value,Direccion_id:e.value};(a=>{_.post("/proveedores",a).then(I=>console.log("respuesta del servidor post",I)).catch(I=>console.log("error en respuesta del servidor",I))})(x),Q()},Q=()=>{A("update:dialogVisible",!1)};return(x,s)=>(C(),K(T,{modelValue:p(g),"onUpdate:modelValue":s[6]||(s[6]=a=>N(g)?g.value=a:null)},{default:r(()=>[l(q,null,{default:r(()=>[l(W,null,{default:r(()=>[Y,l(X,{onSubmi:t},{default:r(()=>[l(m,{class:"q-pb-md",modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),label:"Ingrese rut",mask:"########-#","unmasked-value":"",rules:[a=>!!a||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),l(m,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=a=>n.value=a),label:"Ingrese giro",mask:"###.##","unmasked-value":"",rules:[a=>!!a||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),l(m,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=a=>d.value=a),label:"Ingrese Nombre",mask:"SSSSSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",rules:[a=>!!a||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),l(m,{modelValue:i.value,"onUpdate:modelValue":s[3]||(s[3]=a=>i.value=a),label:"Ingrese telefono",mask:"(+56) # #### ####","unmasked-value":"",rules:[a=>!!a||"Este campo es obligatorio"]},null,8,["modelValue","rules"]),l(m,{type:"email",modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=a=>u.value=a),label:"Ingrese su Correo",rules:[a=>!!a||"Este campo es obligatorio",a=>/.+@.+\..+/.test(a)||"Correo no Valido"]},null,8,["modelValue","rules"]),l(m,{modelValue:o.value,"onUpdate:modelValue":s[5]||(s[5]=a=>o.value=a),label:"Ingrese la pagina web ",mask:"WWW.SSSSSSSSS.SSS","unmasked-value":"",rules:[a=>!!a||"Este campo es obligatorio"]},null,8,["modelValue","rules"])]),_:1})]),_:1}),l($,{align:"right"},{default:r(()=>[l(E,{color:"secondary",type:"submit",label:"crear",onClick:t}),l(E,{color:"negative",label:"Cancel",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),h=F("counter",()=>{const c=V([]),v=M(()=>c.value.length);async function S(){const{data:n}=await _.get("/proveedores");c.value=n}async function g(n){const d=await _.post("/proveedores",n);return d.data||console.log("crearProveedor Error",d.status),S(),d.data}return{proveedores:c,countProveedores:v,getProveedores:S,crearProveedor:g,updateProveedor:async(n,d)=>{const i=await _.put(`/proveedores/${n}`,d);i.data||console.log("updateProveedor error : ",i),console.log("updateProveedor Actualizado ",i.data),S()},deleteProveedor:async n=>{const d=await _.delete(`/proveedores/${n}`);d.data||console.log("deleteProveedor error ",d),console.log("updateProveedor eliminado: ",d.data),S()}}}),ee={class:"q-pa-md"},ue=D({__name:"proveedorPage",setup(c){const v=h(),S=V(!1),g=()=>{S.value=!0},A=async i=>{S.value=i},b=[{field:"rut",name:"rut",label:"rut"},{field:"giro",name:"giro",label:"giro"},{field:"nombre",name:"nombre",label:"nombre"},{field:"telefono",name:"telefono",label:"telefono"},{field:"correo",name:"correo",label:"correo"},{field:"pagina_web",name:"pagina_web",label:"pagina web"},{field:"delete",name:"delete",label:"delete"}],n=V(),d=()=>{H().then(i=>{n.value=i,console.log(n.value)}).catch(i=>console.log("error al obtener los datos ",i))};return z(async()=>{d(),console.log(b)}),(i,u)=>(C(),J("div",ee,[l(E,{unelevated:"",color:"primary",label:"Crear Proveedor",onClick:g}),l(G,{style:{height:"500px"},flat:"",bordered:"",title:"Tabla de Proveedores",rows:n.value,columns:b,"no-data-label":"No se encontro ningun Proveedor"},{body:r(o=>[l(j,{props:o},{default:r(()=>[l(f,{key:"rut",props:o},{default:r(()=>[w(k(o.row.rut)+" ",1),l(y,{modelValue:o.row.rut,"onUpdate:modelValue":e=>o.row.rut=e,title:"Editar rut",buttons:"",persistent:"",onSave:e=>p(v).updateProveedor(o.row.id,{rut:e})},{default:r(e=>[l(m,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,autofocus:"",counter:"",mask:"########-#","unmasked-value":"",onKeyup:u[0]||(u[0]=U(P(()=>{},["stop"]),["enter"])),rules:[t=>!!t||"Ingrese un rut"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(f,{key:"giro",props:o},{default:r(()=>[w(k(o.row.giro)+" ",1),l(y,{modelValue:o.row.giro,"onUpdate:modelValue":e=>o.row.giro=e,title:"Editar giro",buttons:"",persistent:"",onSave:e=>p(v).updateProveedor(o.row.id,{giro:e})},{default:r(e=>[l(m,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,autofocus:"",counter:"",mask:"###.##","unmasked-value":"",onKeyup:u[1]||(u[1]=U(P(()=>{},["stop"]),["enter"])),rules:[t=>!!t||"Ingrese un nombre"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(f,{key:"nombre",props:o},{default:r(()=>[w(k(o.row.nombre)+" ",1),l(y,{modelValue:o.row.nombre,"onUpdate:modelValue":e=>o.row.nombre=e,title:"Editar nombre",buttons:"",persistent:"",onSave:e=>p(v).updateProveedor(o.row.id,{nombre:e})},{default:r(e=>[l(m,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,autofocus:"",counter:"",mask:"SSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",onKeyup:u[2]||(u[2]=U(P(()=>{},["stop"]),["enter"])),rules:[t=>!!t||"Ingrese un nombre"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(f,{key:"telefono",props:o},{default:r(()=>[w(k(o.row.telefono)+" ",1),l(y,{modelValue:o.row.telefono,"onUpdate:modelValue":e=>o.row.telefono=e,title:"Editar telefono",buttons:"",persistent:"",onSave:e=>p(v).updateProveedor(o.row.id,{telefono:e})},{default:r(e=>[l(m,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,autofocus:"",counter:"",mask:"(+56) # #### ####","unmasked-value":"",onKeyup:u[3]||(u[3]=U(P(()=>{},["stop"]),["enter"])),rules:[t=>!!t||"Ingrese un Telefono"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(f,{key:"correo",props:o},{default:r(()=>[w(k(o.row.correo)+" ",1),l(y,{modelValue:o.row.correo,"onUpdate:modelValue":e=>o.row.correo=e,title:"Editar correo",buttons:"",persistent:"",onSave:e=>p(v).updateProveedor(o.row.id,{correo:e})},{default:r(e=>[l(m,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,autofocus:"",counter:"",mask:"AAAAAAA@AAAAAAA.AAA","unmasked-value":"",onKeyup:u[4]||(u[4]=U(P(()=>{},["stop"]),["enter"])),rules:[t=>!!t||"Ingrese un correo"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(f,{key:"pagina_web",props:o},{default:r(()=>[w(k(o.row.pagina_web)+" ",1),l(y,{modelValue:o.row.pagina_web,"onUpdate:modelValue":e=>o.row.pagina_web=e,title:"Editar pagina Web",buttons:"",persistent:"",onSave:e=>p(v).updateProveedor(o.row.id,{pagina_web:e})},{default:r(e=>[l(m,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,autofocus:"",counter:"",mask:"SSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",onKeyup:u[5]||(u[5]=U(P(()=>{},["stop"]),["enter"])),rules:[t=>!!t||"Ingrese un pagina web"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(f,{key:"delete",props:o},{default:r(()=>[l(E,{size:"md",color:"red",label:"Eliminar ",onClick:e=>p(v).deleteProveedor(o.row.id)},{default:r(()=>[l(O,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]),(C(),K(L,null,{default:r(()=>[l(Z,{dialogVisible:S.value,"onUpdate:dialogVisible":A},null,8,["dialogVisible"])]),_:1}))]))}});export{ue as default};
