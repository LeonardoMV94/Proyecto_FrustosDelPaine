import{ak as k,J as T,al as R,r as d,E as q,L as x,M as F,N as t,W as p,am as P,an as z,O as l,ao as J,ap as S,aq as L,V as I,ar as O,as as E,b7 as W,a as X,X as j,au as G,R as A,S as w,av as y,Q as H,aw as U}from"./index.27c63ad1.js";import{Q as Y,a as _}from"./QForm.10717428.js";import{Q as Z,a as C}from"./QTr.acecbace.js";import{Q as h,a as ee}from"./QTable.ff32c38f.js";import{g as le,c as ae,b as oe}from"./direcciones.service.80815313.js";import"./QItem.85f51b38.js";const re=async b=>(await k.post("/colaboradores",b)).data,ne=E("div",{class:"text-center text-h5 q-pb-md"}," Crear un nuevo Colaborador ",-1),ue=E("div",{class:"text-center text-h5 q-pb-md"},"Direccion del cliente",-1),te=T({__name:"CrearColaborador",props:{dialogVisible:{type:Boolean}},emits:["update:dialogVisible"],setup(b,{emit:i}){const c=b,{dialogVisible:V}=R(c),f=i,v=d(),s=d(),r=d(),o=d(),a=d(),u=d(),N=d(),Q=d(),D=d(),B=d();q(async()=>{le().then(g=>{a.value=g,console.log(a)}).catch(g=>console.log("error al obtener Comunas",g))});const $=()=>{B.value=u.value;const g={calle:N.value,numero_calle:Q.value,numero_departamento:D.value,comuna_id:B.value};ae(g).then(m=>n.value=m.data.id).catch(m=>console.log(m));const n=d(),e={nombre:v.value,apellido:s.value,correo:r.value,celular:o.value,direccion_id:n.value},K=d();re(e).then(m=>{K.value=m.id,console.log("colaborador insertado : ",m)}).catch(m=>{console.log("Error al insertar colaborador : ",m)}),oe({Colaboradores_id:K.value,Direcciones_id:n.value}).then(m=>console.log("direccion de colaborador insertada",m.data)).catch(m=>console.log("error al insertar la direccion del colaborador",m))},M=()=>{f("update:dialogVisible",!1)};return(g,n)=>(x(),F(z,{modelValue:p(V),"onUpdate:modelValue":n[8]||(n[8]=e=>P(V)?V.value=e:null)},{default:t(()=>[l(O,null,{default:t(()=>[l(J,null,{default:t(()=>[ne,l(Y,{onSubmi:$},{default:t(()=>[l(S,{modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=e=>v.value=e),label:"Ingrese Nombre",mask:"SSSSSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",rules:[e=>!!e||"Ingrese un nombre"]},null,8,["modelValue","rules"]),l(S,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),label:"Ingrese apellido",mask:"SSSSSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",rules:[e=>!!e||"Ingrese un apellido"]},null,8,["modelValue","rules"]),l(S,{type:"email",modelValue:r.value,"onUpdate:modelValue":n[2]||(n[2]=e=>r.value=e),label:"Ingrese Correo",mask:"AAAAAAA@AAAAAAA.AAA","unmasked-value":"",rules:[e=>!!e||"Ingrese un correo",e=>/.+@.+\..+/.test(e)||"Correo no Valido"]},null,8,["modelValue","rules"]),l(S,{modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=e=>o.value=e),label:"Ingrese su Celular",mask:"(+56) 9 ########",rules:[e=>!!e||"Ingrese un numero de Celular"]},null,8,["modelValue","rules"]),ue,l(S,{modelValue:N.value,"onUpdate:modelValue":n[4]||(n[4]=e=>N.value=e),label:"Ingrese la calle",mask:"SSSSSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",rules:[e=>!!e||"Ingrese un calle"]},null,8,["modelValue","rules"]),l(S,{modelValue:Q.value,"onUpdate:modelValue":n[5]||(n[5]=e=>Q.value=e),label:"Ingrese numero de calle",mask:"NNNNNN","unmasked-value":"",rules:[e=>!!e||"Ingrese un numero calle"]},null,8,["modelValue","rules"]),l(S,{modelValue:D.value,"onUpdate:modelValue":n[6]||(n[6]=e=>D.value=e),label:"Ingrese numero de departamento",mask:"NNNNNN","unmasked-value":"",rules:[e=>!!e||"Ingrese un numero departamento"]},null,8,["modelValue","rules"]),l(h,{options:a.value,modelValue:u.value,"onUpdate:modelValue":n[7]||(n[7]=e=>u.value=e),label:"Comunas"},null,8,["options","modelValue"])]),_:1})]),_:1}),l(L,{align:"right"},{default:t(()=>[l(I,{color:"secondary",type:"submit",label:"crear",onClick:$}),l(I,{color:"negative",label:"Cancel",onClick:M})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),de=W("counter",()=>{const b=d([]),i=X(()=>b.value.length);async function c(){const{data:s}=await k.get("/colaboradores");b.value=s}async function V(s){const r=await k.post("/colaboradores",s);return r.data||console.log("crearColaborador error: ",r.status),c(),r.data}async function f(s,r){const o=await k.put(`/colaboradores/${s}`,r);return o.data||console.log("updateColaborador Error: ",o),c(),o.data}async function v(s){const r=await k.delete(`/colaboradores/${s}`);return r.data||console.log("deleteColaborador: ",r),r.data}return{colaboradores:b,countColaborador:i,getColaborador:c,crearColaborador:V,updateColaborador:f,deleteColaborador:v}}),se={class:"q-pa-md"},ie=E("br",null,null,-1),pe=T({__name:"colaboradorPage",setup(b){const i=de(),c=d(!1),V=()=>{c.value=!0},f=async s=>{c.value=s};d();const v=[{field:"nombres",name:"nombres",label:"nombres"},{field:"apellidos",name:"apellidos",label:"apellidos"},{field:"correo",name:"correo",label:"correo"},{field:"celular",name:"celular",label:"celular"},{field:"delete",name:"delete",label:"delete"}];return q(async()=>{i.getColaborador()}),(s,r)=>(x(),j("div",se,[l(I,{unelevated:"",color:"primary",label:"Crear Colaborador",onClick:V}),ie,l(ee,{style:{height:"400px"},flat:"",bordered:"",title:"Tabla de Colaboradores",rows:p(i).colaboradores,columns:v,"no-data-label":"No se encontro ningun Colaborador"},{body:t(o=>[l(Z,{props:o},{default:t(()=>[l(C,{key:"nombres",props:o},{default:t(()=>[A(w(o.row.nombres)+" ",1),l(_,{modelValue:o.row.nombres,"onUpdate:modelValue":a=>o.row.nombres=a,title:"Editar nombres",buttons:"",persistent:"",onSave:a=>p(i).updateColaborador(o.row.id,{nombres:a})},{default:t(a=>[l(S,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,autofocus:"",counter:"",mask:"SSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",onKeyup:r[0]||(r[0]=y(U(()=>{},["stop"]),["enter"])),rules:[u=>!!u||"Ingrese un nombre"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(C,{key:"apellidos",props:o},{default:t(()=>[A(w(o.row.apellidos)+" ",1),l(_,{modelValue:o.row.apellidos,"onUpdate:modelValue":a=>o.row.apellidos=a,title:"Editar apellido",buttons:"",persistent:"",onSave:a=>p(i).updateColaborador(o.row.id,{apellidos:a})},{default:t(a=>[l(S,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,autofocus:"",counter:"",mask:"SSSSSSSSSSSSSSSSSSSSSSSS","unmasked-value":"",onKeyup:r[1]||(r[1]=y(U(()=>{},["stop"]),["enter"])),rules:[u=>!!u||"Ingrese un apellido"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(C,{key:"correo",props:o},{default:t(()=>[A(w(o.row.correo)+" ",1),l(_,{modelValue:o.row.correo,"onUpdate:modelValue":a=>o.row.correo=a,title:"Editar correo",buttons:"",persistent:"",onSave:a=>p(i).updateColaborador(o.row.id,{correo:a})},{default:t(a=>[l(S,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,autofocus:"",counter:"",mask:"AAAAAAA@AAAAAAA.AAA","unmasked-value":"",onKeyup:r[2]||(r[2]=y(U(()=>{},["stop"]),["enter"])),rules:[u=>!!u||"Ingrese un correo",u=>/.+@.+\..+/.test(u)||"Correo no Valido"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(C,{key:"celular",props:o},{default:t(()=>[A(w(o.row.celular)+" ",1),l(_,{modelValue:o.row.celular,"onUpdate:modelValue":a=>o.row.celular=a,title:"Editar celular",buttons:"",persistent:"",onSave:a=>p(i).updateColaborador(o.row.id,{celular:a})},{default:t(a=>[l(S,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,autofocus:"",counter:"",mask:"(+56) 9 ########",rules:[u=>!!u||"Ingrese un numero de Celular"],"unmasked-value":"",onKeyup:r[3]||(r[3]=y(U(()=>{},["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),l(C,{key:"delete",props:o},{default:t(()=>[l(I,{size:"md",color:"red",label:"Eliminar ",onClick:a=>p(i).deleteColaborador(o.row.id)},{default:t(()=>[l(H,{name:"delete"})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]),(x(),F(G,null,{default:t(()=>[l(te,{dialogVisible:c.value,onUpdateDialogVisible:f},null,8,["dialogVisible"])]),_:1}))]))}});export{pe as default};
